## B站视频 BV1ce411u7qP

![image](https://github.com/ethan686/books/assets/73508499/d621d5d7-2142-4199-9fa6-b20902c04a2f)
如图，对最下面一行的数组，进行求和以及更新某一个值的操作。更新容易，但是再对某一段区间进行求和的时候，需要进行遍历。
这里采用线段树的思想，将原来的数组，两两求和 构建一个新的数组(倒数第二排)。这样更新的时候需要更新两次，但是求和的时候，
运算量直接下降了一倍。在继续两两求和，这样更新最多到log级别，求和的运算量指数下降，最后也是log级别的运算量。

经过上述的优化之后，我们使用了 n + n/2 + n/4 + ... + 1的额外的空间，实现了log级别的一个算法，cool。

但是其实在不断的两两求和过程中，部分元素是无用的了。例如，倒数第二排的第二个元素5，在求前两个元素和 直接是14，前三个元素
直接14 + 1，前四个元素和 直接19，前5个元素和 19 +5.也就是说这个5是totally useless。将所有辅助数组中的所有无用的元素都去掉
之后，剩余的元素 刚好只有n个了。
